âœ… ç¾åœ¨ä¾†å¹«ä½ è£œä¸Šï¼š
views.py + urls.py + é¦–é  product_list.html
ğŸ”§ store/views.py
python
è¤‡è£½
ç·¨è¼¯
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth.decorators import login_required
from .models import Product, Profile, Purchase
from django.contrib import messages

# é¦–é ï¼šé¡¯ç¤ºæ‰€æœ‰å•†å“
def product_list(request):
    products = Product.objects.all()
    return render(request, 'store/product_list.html', {'products': products})

# è³¼è²·å•†å“ï¼ˆéœ€ç™»å…¥ï¼‰
@login_required
def buy_product(request, product_id):
    product = get_object_or_404(Product, id=product_id)
    profile = Profile.objects.get(user=request.user)

    if profile.points >= product.price:
        # æ‰£é»
        profile.points -= product.price
        profile.save()
        # å»ºç«‹è³¼è²·ç´€éŒ„
        Purchase.objects.create(user=request.user, product=product)
        messages.success(request, f"æˆåŠŸè³¼è²·ï¼š{product.name}")
    else:
        messages.error(request, "é»æ•¸ä¸è¶³ï¼Œè«‹å„²å€¼")

    return redirect('product_list')

# ä½¿ç”¨è€…å€‹äººé é¢ï¼šé¡¯ç¤ºé»æ•¸èˆ‡è³¼è²·ç´€éŒ„
@login_required
def profile_view(request):
    profile = Profile.objects.get(user=request.user)
    purchases = Purchase.objects.filter(user=request.user).order_by('-time')
    return render(request, 'store/profile.html', {
        'profile': profile,
        'purchases': purchases
    })
ğŸ”§ store/urls.py
python
è¤‡è£½
ç·¨è¼¯
from django.urls import path
from . import views

urlpatterns = [
    path('', views.product_list, name='product_list'),  # é¦–é 
    path('buy/<int:product_id>/', views.buy_product, name='buy_product'),  # è³¼è²·
    path('profile/', views.profile_view, name='profile_view'),  # å€‹äººé 
]
æ¥è‘—ä½ è¦åœ¨ myshop/urls.py è£¡æ›é€²ä¾†ï¼š

python
è¤‡è£½
ç·¨è¼¯
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('store.urls')),  # é è¨­é¦–é 
]
